<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tilon.ojt_back.dao.user.AdminMapper">

    <!-- 1. 어드민 전체 목록 조회 -->
    <select id="getAdminList" resultType="com.tilon.ojt_back.domain.user.AdminResponseDTO">
        SELECT 
            admin_id AS adminId, 
            empno, 
            password, 
            admin_name AS adminName, 
            role, 
            created_at AS createdAt, 
            updated_at AS updatedAt, 
            email
        FROM 
            admin
    </select>

    <!-- 2. empno로 사용자 정보를 조회하는 쿼리 -->
    <select id="getUserByEmpno" parameterType="string" resultType="com.tilon.ojt_back.domain.user.AdminResponseDTO">
        SELECT 
            admin_id AS adminId, 
            empno, 
            password, 
            admin_name AS adminName, 
            role, 
            created_at AS createdAt, 
            updated_at AS updatedAt, 
            email
        FROM 
            admin
        WHERE 
            empno = #{empno}
    </select>

    <!-- 3. 사용자 추가 -->
    <insert id="insertAdmin" parameterType="com.tilon.ojt_back.domain.user.AdminRequestDTO">
        INSERT INTO admin (empno, password, admin_name, email)
        VALUES (#{empno}, #{password}, #{adminName}, #{email})
    </insert>

    <!-- 사용자 추가 후 존재 여부 검증 -->
    <select id="existsByEmpno" parameterType="string" resultType="boolean">
        SELECT COUNT(1) > 0
        FROM admin
        WHERE empno = #{empno}
    </select>

</mapper>
